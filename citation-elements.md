---
title: Citation Elements
subtitle: General Concepts
date: 26 May 2017
numbersections: true
...
# Citation Elements:<br/> General Concepts

{.ednote ...} This is an **early draft** of the core part of FHISO's
proposed suite of standards on Citation Elements.  This document is not
endorsed by the FHISO membership, and may be updated, replaced or
obsoleted by other documents at any time. 

In particular, some examples in this draft use *citation elements* that
are not even included in the draft Citation Element Vocabulary.  These
elements are very likely to be changed as the vocabulary progresses.
{/}

FHISO's suite of **Citation Elements** standards provides an extensible
framework and vocabulary for encoding all the data about a genealogical
*source* that might reasonably be included in a *formatted citation* to
that *source*.  

This document defines the general concepts used in FHISO's suite of
Citation Elements standards, and the basic framework and data model
underpinning them.  Other standards in the suite are as follows:

* **Citation Elements Vocabulary**.  This standard defines a collection of
  *citation elements* allowing the representation of information
  normally found in *formatted citations* to diverse types of source.

* **Citation Elements: Bindings for RDFa**.  This standard defines a means
  by which *citation elements* may be identified and tagged using RDFa
  attributes within HTML and XML *formatted citations*, allowing a
  computer to extract them in a systematic manner.

* **Citation Elements: Bindings for GEDCOM X**.  This standard defines
  extensions to the GEDCOM X data model and its JSON and XML
  serialisations to allow *citation elements* to be represented in
  GEDCOM X.

* **Citation Elements: Bindings for ELF**.  This standard defines how
  *citation elements* should be represented in FHISO's Extensible Legacy
  Format (ELF), a format based on and compatible with GEDCOM 5.5, but
  with the addition of a new extensibility mechanism.

{.ednote} Not all of these documents are yet at the stage of having a
first public draft.

## Introduction

### Conventions used

Where this standard gives a specific technical meaning to a word or
phrase, that word or phrase is formatted in bold text in its initial
definition, and in italics when used elsewhere.
The key words **must**, **must not**, **required**, **shall**, 
**shall not**, **should**, **should not**, **recommended**,  
**not recommended**, **may** and **optional** in this standard are to be
interpreted as described in
&#x5B;[RFC 2119](http://tools.ietf.org/html/rfc2119)].

An application is **conformant** with this standard if and only if it
obeys all the requirements and prohibitions contained in this
document, as indicated by use of the words *must*, *must not*,
*required*, *shall* and *shall not*, and the relevant parts of its
normative references.  Standards referencing this standard *must not*
loosen any of the requirements and prohibitions made by this standard,
nor place additional requirements or prohibitions on the constructs
defined herein.  

{.note} Derived standards are not allowed to add or remove requirements
or prohibitions on the facilities defined herein so as to preserve
interoperability between applications.  Data generated by one
*conformant* application must always be acceptable to another
*conformant* application, regardless of what additional standards each
may conform to. 

If a *conformant* application encounters data that does not conform to
this standard, it *may* issue a warning or error message, and *may*
terminate processing of the document or data fragment.

Indented text in grey or coloured boxes, such as preceding paragraph,
does not form a normative part of this standard, and is labelled as
either an example or a note.  

{.ednote} Editorial notes, such as this, are used to record outstanding
issues, or points where there is not yet consensus; they will be
resolved and removed for the final standard.  Examples and notes will be
retained in the standard.

The grammar given here uses the form of EBNF notation defined in §6 of
&#x5B;[XML](https://www.w3.org/TR/xml11/)], except that no significance is
attached to the capitalisation of grammar symbols.  *Conforming*
applications *must not* generate data not conforming to the syntax given
here, but non-conforming syntax *may* be accepted and processed by a
*conforming* application in an implementation-defined manner.

### Basic concepts

A **source** is any resource from which information is obtained during
the genealogical research process.  *Sources* come in many forms,
including manuscripts, artefacts, books, films, people, recordings and
websites.  A full mechanism for describing *sources* is
beyond the scope of this standard.

A **citation** is an abstract reference to a specific *source* from
which information has been used in some context.  It *should* include
sufficient detail that a third-party could readily locate the
information themselves, assuming the *source* remains accessible.

A **layered citation** is a *citation* that includes information about
the *sources* from which the referenced *source* was derived, in
addition to information about the referenced *source*.  The information
in a *layered citation* about a specific *source* (whether the consulted
*source* or one of *sources* from which it was derived) is known as a
**citation layer**.  A *citation* with just a single *citation layer*
(being for the consulted *source*) is a **non-layered citation**.

{.example} A *citation* to a parish register that was consulted on
microfilm might contain information about the microfilm and about the
register.  These are two separate *citation layers*.

A **formatted citation** is a *citation* that has been rendered into
human-readable form, typically as a sentence or short paragraph that
might be used as a footnote, endnote or bibliography entry.  There is no
single standard on the correct form of *formatted citations*; many
different style guides exist, each giving their own rules on how to
construct a *formatted citation*.

{.example ...}  A *formatted citation* produced for use in a footnote on
the first use of the *source*, and conforming to [Chicago] might read:

>   ^1^ &nbsp; Christian Settipani, *Les ancêtres de Charlemagne*, 2nd
>   ed. (Oxford: Prosopographia et Genealogica, 2015), 129–31.

The ^1^ at the start of the citation is the hypothetical footnote number.
{/}

A **citation element** is a logically self-contained piece of
information about a *source* that might reasonably be included in a
*formatted citation*.  As this standard does not aim to provide
facilities for the exhaustive description of *sources*, information
about *sources* that is not normally included in *formatted citations*
is not considered to be a *citation element*.
*Citation elements* are represented in a sufficiently structured and
language-independent way that applications can parse and reformat it in
different styles and languages as needed.

{.example}  The date that a *source* like a newspaper article was
published is an example of a *citation element*.  An American researcher
might write the date as "Oct 8th, 2000", while the same date might be
written "zo. 8 okt. 2000" by a Dutch researcher.  The *citation element*
should use neither of these as its representation of the date and adopt
a language-neutral format such as one based on [ISO 8601].

The accompanying Citation Elements Vocabulary standard defines many
*citation elements*, covering the information normally found in
*formatted citations* to a wide range of common *sources*.  Applications
*may* define their own *citation elements* or use those defined by a
third-party standard; such *citation elements* are known as **extension
citation elements**.  *Conforming* applications *must not* discard
unrecognised *extension citation elements*, other than at the
instruction of the user, but *may* opt not to display them.

A **citation element set** is a collection of *citation elements* that
completely encode the information about a *source* required to produce a
*formatted citation*.  Given a *citation element set* (and any necessary
internal state), an application should be able to produce
algorithmically a *formatted citation* in any mainstream citation style;
they need not use every *citation element* in doing so if the style
dictates that certain information is omitted in certain contexts.

{.example ...}  The example *formatted citation* to *Les ancêtres de
Charlemagne* is represented by a *citation element set* containing the
following seven *citation elements*:

*   The author: "`Settipani, Christian`".
*   The title: "`Les ancêtres de Charlemagne`".
*   The edition: "`2`".
*   The place of publication: "`Oxford`".
*   The publisher: "`Prosopographia et Genealogica`".
*   The year of publication: "`2015`".
*   The page range: "`129-131`".

The footnote number is not a *citation element* as it does not pertain
to the *source*.  The author and page range are not expressed here in
quite the same form as the *formatted citation*, but an application can
readily parse them to convert them to the required format because their
format is defined by this standard.
{/}

*Citation element sets* *should not* include *citation elements* for
information that is not normally included in a *formatted citation*. 
They are not intended to provide a general mechanism for storing
arbitrary information about *sources*.

{.example} *Formatted citations* do not normally include details such as
the email addresses, phone numbers or academic affiliations of authors,
so they should not be included in the *citation element set*.

### Characters and strings

**Characters** are specified by reference to their *code point* number
in [ISO 10646], without regard to any particular character encoding.  In
this standard, *characters* may be identified in this standard by their
hexadecimal code point prefixed with "U+".

{.note} The character encoding is a property of the serialisation, and
not defined in this standard.  Non-Unicode encodings are not precluded,
so long as it is defined how characters in that encoding corresponds to
Unicode characters.

*Characters* *must* match the `Char` production from
&#x5B;[XML](https://www.w3.org/TR/xml11/)].

    Char  ::=  [#1-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]

{.note} This includes all *code points* except the null character,
surrogates (which are reserved for encodings such as UTF-16 and not
characters in their own right), and the invalid characters U+FFFE and
U+FFFF.

A **string** is a sequence of zero or more *characters*.

{.note} The definition of a *string* is identical to the definition of
the `string` datatype defined in 
&#x5B;[XSD Pt2](https://www.w3.org/TR/xmlschema11-2/)], used in many XML
and Semantic Web technologies.

Applications *may* convert any *string* into Unicode Normalization Form
C, as defined in any version of Unicode Standard Annex #15 &#x5B;[UAX
15](http://unicode.org/reports/tr15/)].

{.note} This allows applications to store *strings* internally in either
Normalization Form C or Normalization Form D for ease of searching,
sorting and comparison, without also retaining the original,
unnormalised form.

*Characters* matching the `RestrictedChar` production from
&#x5B;[XML](https://www.w3.org/TR/xml11/)] *should not* appear in
*strings*, and applications *may* process such characters in an
implementation-defined manner or reject *strings* containing them.

    RestrictedChar  ::=  [#x1-#x8] | [#xB-#xC] | [#xE-#x1F]
                           | [#x7F-#x84] | [#x86-#x9F]

{.note} This includes all C0 and C1 control characters except tab
(U+0009), line feed (U+000A), carriage return (U+000D) and next line
(U+0085).

{.example} As *conformant* applications can process C1 control
characters in an implementation-defined manner, they can opt to handle
Windows-1252 quotation marks in data masquerading as Unicode.
Applications *must not* treat non-ASCII characters as ANSEL, the
character set properly used in GEDCOM, as ANSEL's non-ASCII characters
do not correspond to `RestrictedChar`s.

**Whitespace** is defined as a sequence of one or more space
*characters*, carriage returns, line feeds, or tabs.  It matches the
production `S` from &#x5B;[XML](https://www.w3.org/TR/xml11/)].

    S  ::=  (#x20 | #x9 | #xD | #xA)+

**Whitespace normalisation** is the process of discarding any leading
or trailing *whitespace*, and replacing other *whitespace* with a single
space (U+0020) *character*.  

{.note}  The definition of *whitespace normalisation* is identical to
that in &#x5B;[XML](https://www.w3.org/TR/xml11/)].

In the event of a difference between the definitions of the `Char`,
`RestrictedChar` and `S` productions given here and those in
&#x5B;[XML](https://www.w3.org/TR/xml11/)], the definitions in the
latest edition of XML 1.1 specification are definitive.

## Citations elements

In the data model defined by this standard, a *citation element*
consists of three parts: 

*  an optional *layer identifier*, identifying the *citation layer*
   to which the *citation element* applies;
*  a name, called the *citation element name*; and
*  a value, called the *citation element value*.

{.ednote}  An earlier draft included a fourth part, a *language tag*.
This has been moved to the *citation element value* in the
form of a *translation set*.

A *citation element set* is defined to be an ordered list of *citation
elements*; however *conformant* applications *may* reorder the list
subject to the following constraints:

*  The relative order of *citation elements* must be preserved when they 
   have the same *layer identifier* and *ultimate super-element*.

*  When a *citation element set* contains a *citation element* with the
   *citation element name*
   `http://terms.fhiso.org/sources/translatedElement`, the previous
   element in *citation element set* with a different *citation element
   name* is referred to as its **translation base**.  The *translation
   base* of any such *citation element* must not change if a *citation
   element set* is reordered.

{.note} The latter requirement can be avoided by processing
`translatedElement`s per §3.4.1 of this standard, and then removing them
from the *citation element set*.

{.note} Subject to these constraints, this standard allows *citation
element sets* to be reordered because some serialisation languages such
as JSON and RDF do not guarantee to preserve the order of elements in
certain important serialisation mechanisms: for example, object members
in JSON and triples in RDF other than when RDF containers are used.

### Layer identifiers

{.ednote} This draft does not yet address the form of the *layer
identifier*, and it is probable the data model will be updated so
that each *citation layer* has its own *citation element set*.

### Citation elements names

The **citation element name** is an identifier used to identify what
information the *citation element* contains.  It is a *string* that
*shall* take the form of an IRI matching the `IRI` production in §2.2 of
&#x5B;[RFC 3987](http://tools.ietf.org/html/rfc3987)].

{.example ...}  The Citation Element Vocabulary standard defines a
*citation element* for the title of a *source*.  It has the *citation
element name*

    http://terms.fhiso.org/sources/title
{/}

{.note} IRIs have been chosen in preference to URIs because it is
recognised that certain culture-specific genealogical concepts may not
have English names, and in such cases the human-legibility of IRIs is
advantageous.  URIs are a subset of IRIs, and all the *citation element
names* defined by this standard are also URIs.

An IRI *must not* be used as a *citation element name* unless it is the
*citation element name* of a *citation element* defined in the manner
required by §3 of this standard.

The *citation elements* defined in this standard all have *citation
element names* that begin `http://terms.fhiso.org/`.  It is
*recommended* that any *extension citation elements* also use the `http`
IRI scheme defined in §2.7.1 of 
&#x5B;[RFC 7230](http://tools.ietf.org/html/rfc7230)], and an authority
component consisting of just a domain name (or subdomain) under the
control of the party defining the *extension citation elements*. 
 
It is *recommended* that an HTTP 1.1 `GET` request made without an
`Accept` header to the *citation element name* IRI (once converted to a
URI per §3.1 of &#x5B;[RFC 3987](http://tools.ietf.org/html/rfc3987)])
*should* result in a 303 "See Other" redirect to a document containing a
human-readable definition of the element.  It is *recommended* that this
definition is in HTML, and that documentation in alternative formats
*may* be made available when the request includes a suitable `Accept`
header, per §5.3.2 of &#x5B;[RFC 7231](//tools.ietf.org/html/rfc7231)].

{.note}  A 303 redirect is considered best practice for &#x5B;[Linked
Data](http://linkeddatabook.com/editions/1.0/)], so as to
avoid confusing the *citation element name* IRI with its definition,
which is found at the post-redirect URL.  The *citation elements*
defined in this standard are not specifically designed for use in Linked
Data, but the same considerations apply.

Parties defining *extension citation elements* *may* arrange for them to
support **discovery**.  This when a HTTP 1.1 `GET` request to the
*citation element name* IRI, made with an appropriate `Accept` header,
yields 303 redirect to a machine-readable definition of the *citation
element*.  

{.ednote}  FHISO does not currently define a *discovery* mechanism, but
anticipate doing so in a future standard.  If such a standard is ready
when this standard is released, support for *discovery* by the
authors of *extension citation elements* is likely to be changed to be
*recommended*, but not *required*, while application support for it
would be *optional*.

*Citation element names* are compared using the "simple string
comparison" algorithm given in §5.3.1 of 
&#x5B;[RFC 3987](http://tools.ietf.org/html/rfc3987)].  If a *citation
element name* does not compare equal to an IRI known to the application,
the application *must not* make any assumptions on the purpose of the
*citation element* or the meaning of its value based on the IRI.

{.note} This comparison is a simple character-by-character comparison,
with no normalisation carried out on the IRIs prior to comparison.  This
is how XML namespace names are compared in 
&#x5B;[XML Names](https://www.w3.org/TR/xml-names11/)].

{.example ...}  The following IRIs are all distinct for the purpose of
the "simple string comparison" algorithm given in §5.3.1 of 
&#x5B;[RFC 3987](http://tools.ietf.org/html/rfc3987)], , even though an
HTTP request to them would fetch the same resource.

    http://éléments.example.com/nationalité
    HTTP://ÉLÉMENTS.EXAMPLE.COM/nationalit%C3%A9
    http://xn--lments-9uab.example.com/nationalit%c3%a9

{/}

An IRI *must not* be used as a *citation element name* unless it can be
converted to a URI using the algorithm specified in §3.1 of 
&#x5B;[RFC 3987](http://tools.ietf.org/html/rfc3987)], and back to a IRI
again using the algorithm specified in §3.2 of 
&#x5B;[RFC 3987](http://tools.ietf.org/html/rfc3987)], to yield the
original IRI.

{.note}  This requirement ensures that *citation element names* can be
used in a context where a URI is required, and that the original IRI can
be regenerated, for example for comparision with a list of known IRIs.
The vast majority of IRIs, including those in non-Latin scripts, have
this property.  The effect of this requirement is to prohibit the use of
IRIs that are already partly converted to a URI, for example through the
use of unnecessary percent or punycode encoding.

{.example}  Of the three IRIs given in the previous example on how to
compare IRIs, only the first may be used as a *citation element name*.
The second and third are prohibited as a result of the unnecessary
percent-encoding, and the third is additionally prohibited as a result
of unnecessary punycode-encoding.


### Citation elements values

The **citation element value** is the content of the *citation element*.
The *citation element value* *shall* be a *translation set* if the
*citation element* contains textual data that is in a particular
language or script which cannot automatically be translated or
transliterated as required.  Otherwise it *shall* be a *string*.

{.example ...}  A book published in 2015 would have its year of
publication be encoded in a *citation element* with:

*    the *name* `http://terms.fhiso.org/sources/publicationDate`; and
*    a *value* comprising the *string* "`2015`".

Even though an application designed for Arabic researchers might need to
display the year as "<span dir="rtl">٢٠١٥</span>" using Eastern Arabic
numerals, this conversion can be done entirely in the application's user
interface, so a *translation set* is not required and *must not* be
used.
{/}

#### Translation sets

A **translation set** is an ordered list of *strings*, each of which
*shall* be tagged with a **language tag** to identify the language, and
where appropriate the script and regional variant, in which that
particular *string* is written.  Each *string* in a *translation set*
*should* contain the same information, but translated, transliterated or
localised.  The *language tag* *shall* match the `Language-Tag`
production from
&#x5B;[RFC 5646](http://tools.ietf.org/html/rfc5646)], and *should*
contain a script subtags per §2.2.3 of 
&#x5B;[RFC 5646](http://tools.ietf.org/html/rfc5646)] when
transliteration has occurred.  

{.example ...}  The `http://terms.fhiso.org/sources/title` element's value
is a *translation set*.  This might contain, in order:

*    the original title "`Η Γενεαλογία των Κομνηνών`" with
     *language tag* `el`, the language code for Greek in [ISO 639-1];
*    a transliteration, perhaps supplied algorithmically, with the value
     "`Hē Genealogia tōn Komnēnōn`" and *language tag* `el-Latn`,
     `Latn` being the code for the Latin script in [ISO 15924];
*    and a French translation, "`La généalogie des Comnènes`", tagged 
     with the language code `fr`.
{/}

{.example} *Translation sets* are not restricted to situations where
translation is not involved.  They are also used where transliteration
or other localisation may be needed.  An author' name is rarely
translated in usual sense, but may be transliterated.  Andalusian
historian <span dir="rtl">صاعد الأندلسي</span> might be translitered
"Ṣā‘id al-Andalusī" in the Latin script.  These two values would still
belong in a *translation set* despite not being translations.  They
would be tagged `ar` and `ar-Latn`, meaning the Arabic language in its
default script and in the Latin script, respectively.  An author's names
may also be respelled to conform to the spelling and grammar rules of
the reader's language.  An Englishman named Richard may be rendered
"Rikardo" or "Rićardo" in Esperanto: the change of the "c" to a "k" or a
"ć" being to conform to Esperanto orthography, while the final "o" marks
it as a noun.  The respelling would be tagged `eo`, the language code
for Esperanto.

{.note} Frequently *translation sets* will contain only a single
*string*.  Although the *language tags* is *required*, it need not be
explicit in the serialisation.  A serialisation format *may* provide a
mechanism for stating the document's default *language tag*, and *may*
provide a global default such as `und`, defined in 
&#x5B;[ISO 639-2](http://www.loc.gov/standards/iso639-2/)] to mean the
language is undetermined.

Where possible, the first *string* in the *translation set* *should* be
the untranslated, and ideally untransliterated form of the *citation
element value*.  If it is known that the only available values are
translations, the first *string* in the *translation set* *should* be an
empty string tagged with the *language tag* `und`, and the translations
listed afterwards.

*Conformant* applications *may* reorder the *translation set*, but
*must* leave the first *string* first, so that applications wishing to
use the orignal, untranslated, untransliterated form can do so.

{.note} A standard may define a serialisation format that does not
preserve the order of a *translation set*, but *must* take alternative
steps to record the original version.  For example, the language map in
&#x5B;[JSON-LD](https://www.w3.org/TR/json-ld/)] is very similar to a
*translation map*, except that JSON's object notion, as given in §4 of 
&#x5B;[RFC 7159](http://tools.ietf.org/html/rfc7159)], does not preserve
order.  One possible solution is to append some private use subtag (per
§2.2.7 of &#x5B;[RFC 5646](http://tools.ietf.org/html/rfc5646)]) to the
first *language tag*.

A *translation set* *must not* contain more than one *string* with the
same *language tag*.  If an application encounters a *translation set*
with duplicate *language tags*, it *may* drop the second and subsequent
*strings* with that *language tags*; it *should not* do this if the
*translation set* has been reordered from its serialised form.

{.ednote ...} An earlier draft of this standard put the *language tag* in
the *citation element*, and made the *citation element value* a list.
This had the problem that all list values had to be available in all
languages or scripts.  This caused problems with lists of authors
containing names in different native scripts.

The earlier draft also said that the original untransliterated,
untranslated value should not have a *language tag*.  This allowed
applications to pick out the original version, but left no way of
distinguishing between translated and transliterated versions.

These problems are solved in this version.
{/}

If *translation sets* are being serialised in XML, it is
*recommended* that the special `xml:lang` attribute defined in §2.12 of 
&#x5B;[XML](https://www.w3.org/TR/xml11/)] is used to encode the
*language tag*.  

Applications *should* apply *whitespace-normalisation* to any *string*
in a *citation element value*.  This applies both to *strings* in
*translation sets* and when they are the *citation element value*
directly.

## Defining citation elements

In addition to describing the intended purpose of the *citation
element*, the definition of a *citation element* (regardless of whether
it is one of those defined in this standard, or whether it is an
*conformant extension citation element*) *shall* state:

*   its *citation element name* (an IRI);
*   whether it is a *sub-element* of some other *citation element*,
    and if so which one;
*   its *range*: the formal *class name* of its value space;
*   its *cardinality*: that is, whether it is *single-valued* or
    *multi-valued*; and
*   its *translatability*: whether its *value* is a
    *translation set*.

### Sub-elements

A *citation element* *may* be defined as a **sub-element** of another
*citation element*, referred to as its **super-element**.  This is used
to provide a refinement of a general *citation element*.  If an
application is unfamiliar with the *sub-element* it *may* process it as
if it were the *super-element*, with its *value* unchanged.  The
*sub-element* must be defined in such as way that this only results in
some loss of meaning, and does not imply anything false about the cited
*source*.

{.example ...}  The Citation Elements Vocabulary defines a *citation
element* with the name 

    http://terms.fhiso.org/sources/creatorName

which contains name of a person, organisation or other entity who
created or contributed to the creation of the *source*.  Several
*sub-elements* of it are defined, including

    http://terms.fhiso.org/sources/interviewerName

which contains the name of an interviewer when the *source* is an
interview.  An interviewer can certainly be considered to have
contributed to the creation of the interview.  

The Citation Elements Vocabulary also defines a *citation element* with
the name 

    http://terms.fhiso.org/sources/recipientName

which contains the party to whom a *source* such as a letter is
addressed.  In many respects it is similar to the *sub-elements* of
`creatorName`, but because a recipient of a letter cannot be said to
have created or contributed to the creation of the letter, and might not
even be aware of its existance if it were not delivered, the
`recipientName` element cannot be defined as a *sub-element* of
`creatorName`.
{/}

The *range* and *translatability* of a *sub-element* *shall* be the same
as that of its *super-element*.

{.ednote}  The *range* of a *sub-element* could be allowed to be a
sub-class of the *super-element's* *range*, where a sub-class is
understood to reduce the value space of the *class*.  (It would
correspond to concept of a restriction in §2.4.3 of 
&#x5B;[XSD Pt2](https://www.w3.org/TR/xmlschema11-2/)].)   At the moment
there is no clear use case for this.

All *sub-elements* and their *super-elements* *shall* be *multi-valued*.

{.ednote ...}  If there is a use-case for *single-valued* *sub-elements*
with *super-elements* of either *cardinality*, it could be accommodated
in this model at the cost of extra complexity.  The following paragraph
is a broader alternative to the previous requirement.

A *sub-element* of a *single-valued* *citation element* *must* also be
defined as *single-valued*.  If all *sub-elements* of *single-valued*
*citation elements* in a *citation element set* are replaced by their
*super-element*, recursively until no *sub-elements* of *single-valued*
*citation elements* exist, the *citation element set* *must not* contain
more than one *single-valued* *citation element* with any given *layer
identifier* and *citation element name*.
{/}

A *citation element's* **ultimate super-element** is defined inductively
as follows.  If the *citation element* is not a *sub-element* of any
other *citation element*, then it is defined to be its own *ultimate
super-element*.  Otherwise, its *ultimate super-element* is the
*ultimate super-element* of its *super-element*.

{.note}  This definition of an *ultimate super-element* follows the
(possibly empty) chain of *super-elements* until it reaches something
that is not a *sub-element*.  It is used in specifying how applications
are permitted to reorder *citation element sets*.

A *citation element set* *must not* contain more than one *citation
element* with the same *layer identifier* and *ultimate super-element*,
unless the *ultimate super-element* is defined as being *multi-valued*.


### Range

The **range** of a *citation element* is a **class**, which is a formal
description of the set of possible *citation element values* for the
*citation element*, giving both their lexical form and their semantics.
*Classes* are identified by a **class name** which *shall* take the
form of an IRI.

{.example ...}  The Citation Elements Vocabulary standard defines a
*class* for representing the names of authors and other people, which
has the *class name* 

    http://terms.fhiso.org/sources/AgentName

It is the *range* of several *citation elements* including

    http://terms.fhiso.org/sources/editorName
{/}

{.note} This definition of a *class* is sufficiently aligned with the
XML Schema's notion of a simple type, as defined in 
&#x5B;[XSD Pt2](http://www.w3.org/TR/xmlschema11-2/)], that they *may*
be used as the *range* of *citation elements*.  Best practice on how to
get an IRI for use as the *class name* of XML Schema types can be found
in &#x5B;[SWBP XSD DT](https://www.w3.org/TR/swbp-xsch-datatypes/)].

The *class name* for the *class* of *strings* is:

    http://www.w3.org/2001/XMLSchema#string

{.ednote} Read XML Schema re the difference between plain literals,
`xsd:string`s, and plain literals tagged with a *language tag*.

If an application encounters a *citation element value* that does not
conform to the definition of the *class* used as the *range* of the
*citation element*, it *may* remove the *citation element* or *may*
convert it to a valid value in an implementation-defined manner.

{.example}  The *range* of the 
`http://terms.fhiso.org/sources/publicationDate` element defined in the
Citation Element Vocabulary is an [ISO 8601]-compatible date.  An
application encountering a date "8 Okt 2000" in a `publicationDate`
element in dataset that uses German as its default language *may*
convert this to "`2000-10-08`".

### Cardinality

The **cardinality** of a *citation element* records how many semantically
distinct values it can have.  A **multi-valued** *citation element* is
one that can logically have multiple values in a single *citation*.  It
*should* be reserved for situations where the values genuinely contains
different information, and not used to accommodate transliterations,
translations, or variant forms of something that is logically a single
value.  *Citation elements* that are not *multi-valued* are
**single-valued**.

A *citation element set* *must not* contain more than one *citation
element* with the same *layer identifier* and *citation element name*,
unless the *citation element* is defined as being *multi-valued*.  If an
application encouters a *citation element set* containing multiple
instances of a *single-valued* *citation element*, it *may* remove the
second and subsequent instance.

{.example}  The `http://terms.fhiso.org/sources/title` *citation
element* is defined to be *single-valued*, as *citations* do not refer
to the same *sources* by different titles (though it may translate or
transliterate the title), so the *citation element set* for a
*non-layered citation* *must not* contain more than one `title`; but it
*may* contain several `http://terms.fhiso.org/sources/authorName`
*citation elements*, as that is defined to be *multi-valued* to
accommodate *sources* with several authors.

### Translatability

If a *citation element* is defined to be **translatable**, then its
*citation element value* *shall* be a *translation set*, and the
*citation element's* *range* applies to each *string* in the
*translation set*.  If it is not *translatable*, then the *value*
*shall* be a single *string*.  *Citation elements* with non-textual
*citation element values* such as numbers or dates *must* be defined
as not *translatable*.

If an application encounters a *citation element* whose *citation
element value* is a *translation set*, but where the application knows
the *citation element* to be defined as not *translatable*, the
application *may* convert the *translation set* to a *string* by
discarding all but the first *string* in the *translation set*.  If the
*translation set* contains only one *string*, and if that *string*
conforms to the *range* of the *citation element*, this conversion
*should* be done.  

If an application encounters a *citation element* whose *citation
element value* is a *string*, but where the application knows the
*citation element* to be defined as *translatable*, the application
*should* convert the *string* to a *translation set* by tagging it with
the *language tag* `und` (defined in 
&#x5B;[ISO 639-2](http://www.loc.gov/standards/iso639-2/)]
as representing an undetermined language).

#### List-flattening formats

*Conformant* applications *must* support *citation elements* that are
both *multi-valued* and *translatable*, and *must* ensure that the
*translation set* for each *citation element value* remains separate.

{.example ...} The `authorName` *citation element* is such an element
because a source may have multiple authors, each of whom may have names
that have been transliterated into different scripts.  Suppose a
researcher wants to cite the Anglo-Japanese Treaty document of 1902
which was (at least nominally) authored by the Marquess of Lansdowne and
Count Hayashi Tadasu whose name is written in kanji as 林&nbsp;董.

The following JSON serialisation is not allowed as it flattens
*translation set* so it is no longer possible to determine how many
authors there are, and which names are translations of which others.

    [ { "name": "http://terms.fhiso.org/terms/title",
        "lang": "en",      "value": "The Anglo-Japanese Treaty" },
      { "name": "http://terms.fhiso.org/terms/authorName",
        "lang": "en",      "value": "Lord Lansdowne" },
      { "name": "http://terms.fhiso.org/terms/authorName",
        "lang": "jp",      "value": "林 董"          },
      { "name": "http://terms.fhiso.org/terms/authorName",
        "lang": "jp-Latn", "value": "Hayashi Tadasu" } ]

This is an example of a *list-flattening format*.
{/}

A serialisation format that does not keep the *translation sets* of each
*citation element value* separate is called a **list-flattening format**,
and this standard provides a facility to allow such formats to comply
with this standard by introducing a special *citation element* with the
following properties:

------           -----------------------------------------------
Name             `http://terms.fhiso.org/sources/translatedElement`     
Range            `http://www.w3.org/2001/XMLSchema#string`
Cardinality      multi-valued
Translatability  translatable
Super-element    *none*
------           -----------------------------------------------

{.ednote}  Check that `xsd:string` is correct.

In a *list-flattening format*, an application *must* consider every
value to be a separate *citation element value*, and therefore to be a
*translation set* with one element.

{.note} In most cases this assumption is expected to be valid.
*Citation element sets* are expected to include translated or
transliterated elements less often than not.

When a *translation set* with two or more *strings* needs to be
serialised in a *list-flattening format*, the first *string* *must* be
serialised according to the normal rules of the format, and subsequent
*strings* *must* be serialised as if they were separate *citation
element*, but with the `translatedElement` *citation element name* in
place of the actual *citation element name*.  This special *citation
element* indicates that its value is not a distinct *citation element*
and *should* instead be appended to the *translation set* of its
*translation base* (i.e. the last preceding *citation element* which is
not a `translatedElement`), and the `translatedElement` removed from the
*citation element set*.

{.example ...}  The hypothetical JSON serialisation in the last example
can be fixed by using a `translatedElement` to serialise the
transliterated version of Hayashi's name:

    [ { "name": "http://terms.fhiso.org/terms/title",
        "lang": "en",      "value": "The Anglo-Japanese Treaty" },
      { "name": "http://terms.fhiso.org/terms/authorName",
        "lang": "en",      "value": "Lord Lansdowne" },
      { "name": "http://terms.fhiso.org/terms/authorName",
        "lang": "jp",      "value": "林 董"          },
      { "name": "http://terms.fhiso.org/terms/translatedElement",
        "lang": "jp-Latn", "value": "Hayashi Tadasu" } ]

The two `authorName` element are assumed to be separate *citation
elements* and therefore to refer to different authors.  The use of
`translatedElement` signifies that this is not a different author.  It
immediately follows an `authorName` *citation element* with the value 
林&nbsp;董, and its value ("Hayashi Tadasu", tagged as `jp-Latn`) should
be appended to that *translation set*.
{/}

{.note} This standard does not say when the processing of
`translatedElements` occurs.  Ideally an application *should* do it
during the process of reading a *list-flattening format*, but *may* do
it later or not at all.  If the application subsequently serialise the
data in a non-*list-flattening format*, the `translatedElement`s *may*
still be present.  Therefore applications reading non-*list-flattening
format* *should* cope with the possibility of `translatedElements` being
present.

If the *translation base* does not have a *translation set* as its
*citation element value* (i.e. if its value is just a *string*), the
`translatedElement` *should* be ignored and *may* be removed from the
*citation element set*.  If the *translation base* is a *translation
set* that already contains a string with the same *language tag*, an
application *must not* overwrite or duplicate a *language tag*; the
`translatedElement` *should* be ignored and *may* be removed from the
the *citation element set*.

The use of *list-flattening formats* is *not recommended* except where
there is a good technical reason.  The use of `translatedElement`s other
than in *list-flattening formats* is *not recommended*.

## References

### Normative references

[ISO 10646]
:   ISO (International Organization for Standardization).  *ISO/IEC
    10646:2014. Information technology &mdash; Universal Coded Character
    Set (UCS).*  2014.

[ISO 15924]
:   ISO (International Organization for Standardization).  *ISO
    15924:2004.  Codes for the representation of names of scripts.*
    2004.

[ISO 639-1]
:   ISO (International Organization for Standardization).  *ISO
    639-1:2002.  Codes for the representation of names of languages
    &mdash; Part 1: Alpha-2 code*.  2002.

[ISO 639-2]
:   ISO (International Organization for Standardization).  *ISO
    639-2:1998.  Codes for the representation of names of languages
    &mdash; Part 2: Alpha-3 code*.  1998.  (See
    <http://www.loc.gov/standards/iso639-2/>.)

[RFC 2119]
:   IETF (Internet Engineering Task Force).  *RFC 2119:  Key words for
    use in RFCs to Indicate Requirement Levels.*  Scott Bradner, 1997.
    (See <http://tools.ietf.org/html/rfc2119>.)

[RFC 3987]
:   IETF (Internet Engineering Task Force).  *RFC 3987:
    Internationalized Resource Identifiers (IRIs).*  Martin Duerst and
    Michel Suignard, 2005. (See <http://tools.ietf.org/html/rfc3987>.)

[RFC 5646]
:   IETF (Internet Engineering Task Force).  *RFC 5646:
    Tags for Identifying Languages.*  Addison Phillips and Mark Davis,
    eds., 2009.  (See <http://tools.ietf.org/html/rfc5646>.)

[RFC 7230]
:   IETF (Internet Engineering Task Force).  *RFC 7230:  Hypertext
    Transfer Protocol (HTTP/1.1): Message Syntax and Routing.*  Roy
    Fieldind and Julian Reschke, eds., 2014.  (See
    <http://tools.ietf.org/html/rfc7230>.)

[RFC 7231]
:   IETF (Internet Engineering Task Force).  *RFC 7231:  Hypertext
    Transfer Protocol (HTTP/1.1): Semantics and Content.*  Roy
    Fieldind and Julian Reschke, eds., 2014.  (See
    <http://tools.ietf.org/html/rfc7231>.)

[UAX 15]
:   The Unicode Consortium.  "Unicode Standard Annex 15: Unicode
    Normalization Forms" in *The Unicode Standard, Version 8.0.0.*
    Mark Davis and Ken Whistler, eds., 2015.  (See
    <http://unicode.org/reports/tr15/>.)

[XML]
:   W3C (World Wide Web Consortium). *Extensible Markup Language (XML) 1.1*, 
    2nd edition.  Tim Bray, Jean Paoli, C. M. Sperberg-McQueen, Eve
    Maler, François Yergeau, and John Cowan eds., 2006.  W3C
    Recommendation.  (See <https://www.w3.org/TR/xml11/>.)

### Other references

[Chicago]
:   *The Chicago Manual of Style*, 16th ed.  Chicago: University of
    Chicago Press, 2010.

[ISO 8601]
:   ISO (Internation Organization for Standardization).  *ISO
    8601:2004.  Data elements and interchange formats — Information
    interchange — Representation of dates and times*.  2004.

[JSON-LD]
:   W3C (World Wide Web Consortium).  *JSON-LD 1.0 &mdash;  A JSON-based
    Serialization for Linked Data.*  Manu Sporny, Gregg Kellogg and
    Markus Lanthaler, eds., 2014.  W3C Recommendation.  (See
    <https://www.w3.org/TR/json-ld/>.)

[Linked Data]
:   Heath, Tom and Christian Bizer.  *Linked Data: Evolving the Web into
    a Global Data Space*, 1st edition.  Morgan & Claypool, 2011.
    (See <http://linkeddatabook.com/editions/1.0/>.)

[RFC 7159]
:   IETF (Internet Engineering Task Force).  *The JavaScript Object
    Notation (JSON) Data Interchange Format*  Tim Bray, ed., 2014.
    (See <http://tools.ietf.org/html/rfc7159>.)

[SWBP XSD DT]
:   W3C (World Wide Web Consortium). *XML Schema Datatypes in RDF and OWL*.
    Jeremy J. Carroll and Jeff Z. Pan, 2006.
    W3C Working Group.  See <https://www.w3.org/TR/swbp-xsch-datatypes/>.

[XML Names]
:   W3 (World Wide Web Consortium). *Namespaces in XML 1.1*, 2nd edition.
    Tim Bray, Dave Hollander, Andrew Layman and Richard Tobin, eds., 2006.  
    W3C Recommendation.  See <https://www.w3.org/TR/xml-names11/>.

[XSD Pt2]
:   W3 (World Wide Web Consortium). *W3C XML Schema Definition Language (XSD)
    1.1 Part 2: Datatypes*.  W3C Recommendation.  See
    <https://www.w3.org/TR/xmlschema11-2/>

