---
title: Citation Elements
subtitle: Bindings for RDFa
date: 22 May 2017
numbersections: true
...
# FHISO Citation Elements: Bindings for RDFa

{.ednote} This is a **first draft** of a standard documenting the
proposed usage of the FHISO Citation Elements standard in RDFa.
This document is not an FHISO standard and is not endorsed by the FHISO
membership.  It may be updated, replaced or obsoleted by other documents
at any time.

FHISO's Citation Elements standard provides an extensible framework
for encoding all the data about a genealogical **source** that might
reasonably be included in a **formatted citation** to that source.
This information is represented as a sequence of **citation elements**.
This standard defines a means by which *citation elements* may be
identified and tagged within an XML or HTML *formatted citation*,
allowing a computer to extracted them in a systematic manner.  The
tagging of *citation elements* is done using a standard set of HTML
attributes known as RDFa attributes, which can also be used in XML
languages besides HTML. 

## Conformance

The key words **must**, **must not**, **required**, **shall**, 
**shall not**, **should**, **should not**, **recommended**,  
**not recommended**, **may** and **optional** in this standard are to be
interpreted as described in
&#x5B;[RFC 2119](http://tools.ietf.org/html/rfc2119)].

An application is **conformant** with this standard if and only if it
follows all the requirements and prohibitions contained in this
document, as indicated by use of the words *must*, *must not*,
*required*, *shall* and *shall not*, and the relevant parts of its
normative references.  Standards referencing this standard *must not*
loosen any of the requirements and prohibitions made by this standard,
nor place additional requirements or prohibitions on the constructs
defined herein.  

{.note} Adding requirements or prohibitions is disallowed so as to
preserve interoperability between applications: data generated by one
*conformant* application must always be acceptable to another
*conformant* application, regardless of what additional standards each
may conform to. 

Indented text in coloured boxes, such as preceding paragraph, does not
form a normative part of this standard, and is labelled as either an
example or a note.  

{.ednote} Editorial notes, such as this, are used to record outstanding
issues, or points where there is not yet consensus; they will be
resolved and removed for the final standard.  Examples and notes will be
retained in the standard.

## RDFa attributes

The tagging of *citation elements* in *formatted citations* is done
using a standard set of HTML attributes known as RDFa attributes which
are defined in [RDFa Core].  Compliance with this FHISO standard does
not require full RDFa compliance: support for the full [RDFa Core] is
*optional*, and RDFa features other than those for which support is
*required* in this standard *should not* be used when compatibility
between implementations is desirable.  

{.note} The specification of [RDFa Core] assumes a good working
knowledge of the RDF graph model.  A more accessible introduction to
RDFa can be found in the [RDFa Primer], but FHISO's use of RDFa
attributes here is limited and this standard is designed to be
used without any knowledge of RDFa or RDF.  An application parsing RDFa
attributes according to this specification does not need a full RDFa
parser, far less to support the full RDF graph model.

These attributes *may* be used in any XML-based markup language, but for
the purpose of tagging *citation elements* in *formatted citations* it
is *recommended* that they be used in HTML.  

{.note} Applications wishing to implement a fully-compliant RDFa parser
for HTML will find the formal specification on the use of RDFa in HTML
in two standards, [HTML+RDFa] and [XHTML+RDFa].

In the simplest case, the *citation element name* (which is an IRI)
can be put in a `property` attribute on an XML or HTML element, and the
*citation element value* is the text contents of the element.  The
particular type of element on which the attributes are placed is not
relevant.

{.example ...}  A simplified *formatted citation* to Settipani's book
*Les ancêtres de Charlemagne* might be marked up as the following HTML
fragment:

    <p>Settipani, Christian.  <i>Les ancêtres de Charlemagne</i>.</p>

The title of the book can be tagged by adding a `property` attribute to
the existing `<i>` element.  As written above, no element contains just
the author's name as the `<p>` element also encloses the title; however
author's name can be wrapped in an `<span>` element and the `property`
attributed added to that.  HTML's `<span>` element has no defined
meaning of its own, but exists to provide a place for attributes such as
this.

    <p><span property="http://terms.fhiso.org/sources/authorName"
      >Settipani, Christian</span>. 
      <i property="http://terms.fhiso.org/sources/title">Les ancêtres 
        de Charlemagne</i>.</p>

An HTML renderer will correctly format this while ignoring the two
`property` attributes, but an application that conforms to this standard
will extract these two *citation elements* from this HTML:

--------------           --------------------------------------
`authorName`:            "`Settipani, Christian`"
`title`:                 "`Les ancêtres de Charlemagne`"
--------------           --------------------------------------
{/}

### Index of attributes used

This standard makes use of the following attributes:

*  The `vocab` and `prefix` attributes are used to allow the creation of
   shorthand IRIs per §3.  Full support for their RDFa semantics is
   *required* by this standard, except that the use of an *initial
   context* to provide defaults is *optional*.

*  The `typeof` attribute is used to locate *formatted citations* per
   §4.  Support for any other use of this attribute is *optional*, and
   any other unsupported use of *shall* be marked as a *source-exclusion
   element* per §5 and is not processed by this standard.

*  The `property` attribute contains a *citation element name* as per
   §6.2.  Full support for its RDFa sematics is *required*, other than
   when it is used in constructs that define *source-exclusion
   elements*, and except for the special beaviour RDFa gives to an
   `rdfa:copy` property.

*  The `content`, `href` and `src` attribute can be used to represent a
   *citation element value* as per §6.3.  Full support for their RDFa
   semantics is *required*.

*  The `xml:lang` and `lang` attributes ar eused to represent a
   *language tag* as per §6.4.  Full support for their RDFa semantics is
   *required*.

*  The `about`, `inlist`, `rev`, `resource` and `rel` attributes are not
   used by this standard.  Support for their RDFa semantics is
   *optional*, and any unsupported use of them *shall* be marked as a
   *source-exclusion element* per §5 and is not processed by this
   standard.
 
*  The `datatype` attribute is not used by this standard.  Support for
   its RDFa semantics is *optional*, and any unsupported use of this
   attribute *shall* be ignored, except when the presence of the
   attribute affects the determination of the *citation element value*
   per §6.3.

## Shorthand IRIs

The `property` and `typeof` attributes in RDFa contain IRIs that are
used as identifiers.  Each attribute contains a list of IRIs, possibly
abbreviated through one of the mechanisms below, separated by
whitespace.  Leading and trailing whitespace is discarded.  Whitespace
is defined as a sequence of one or more space character (U+0020),
carriage return (U+000D), line feed (U+000A), or tab (U+0009). 

{.example ...} A common reason why multiple IRIs might be present is
when two IRIs exist with similar meanings and the creator of the
citation wishes to use both for compatibility.

    <i property="http://terms.fhiso.org/sources/title
                 http://purl.org/dc/terms/title">Les ancêtres de
      Charlemagne</i>

Here two alternative IRIs are used to tag the title, presumably because
the citation's creator anticipated it being processed by applications
that support [Dublin Core] metadata as well as FHISO's Citation Elements
standards.  A parser conforming to this standard will treat both IRIs as
valid and create two *citation elements*, both with the same *citation
element value*, however if the Dublic Core IRI is not known to the
application, it will likely be ignored.
{/}

In the uses described by this standard the `property` attribute will
always contain a *citation element name*, while the `typeof` attribute
will contain an IRI that allows this standard's use of RDFa to be
distinguished from any other uses also happening.

RDFa provides two separate mechanism for abbreviating the IRIs in these
attributes: by setting a *local default vocabulary*, and by using
prefixes to create compact URIs expressions (CURIEs).  Applications
processing *formatted citations* in accordance with this standard *must*
support both of these mechanisms.  Expansion of *terms* using the
*local default vocabulary* *shall* be done before the expansion of
CURIEs.  An application *must* behave as if all `property` and `typeof`
attributes have been expanded before continuing to process the data.

### Default vocabularies

A **term** in RDFa is an XML NCName that also permits slash (U+002F) as
a non-leading character.  It matches the `term` production given in
§7.4.3 of [RDFa Core].  

{.note ...}  This production is as follows:

    term     ::=  NCNameStartChar termChar*
    termChar ::=  ( NameChar - ':' ) | '/'

The definitions of `NameChar` and `NCNameStartChar` are found in [XML]
and [XML Names] respectively.
{/}

When a `property` or `typeof` attribute contains a *term*, it *shall* be
converted to an IRI by prepending the *local default vocabulary* if one
exists.  The **local default vocabulary** is an IRI which is specified
using a `vocab` attribute.  It applies to the element where it is
specified and to all elements in its content unless overridden with
another `vocab` attribute.

{.note}  Terms look similar to relative IRIs and this process is similar
to resolving relative IRIs against a base IRI, but the process of
applying a *local default vocabulary* is simpler as the two strings are
simply concatenated without understanding the structure of the IRI.

Markup generators *should* ensure that a `vocab` is present if *terms*
are being used when compatibility between implementations is desirable. 
When these attributes are used in languages other than HTML, the
definition of that language *may* provide a *default vocabulary* that
applies in the event that no `vocab` attribute is found; HTML provides
no such default.

If no *local default vocabulary* was found, a parser *may* use an
*initial context* as described in §9 of [RDFa Core] to resolve the
*term* to an IRI; if not, or if it was not found in the *initial
context*, the term *shall* be ignored.  When an *initial context* is
used, it *must* be the standard one for the language on which the RDFa
tags are used: implementations *must not* define their own *initial
context*.

{.example ...}
    <p><span property="authorName">Settipani, Christian</span>. 
      <i vocab="http://terms.fhiso.org/sources/"
         property="title">Les ancêtres de Charlemagne</i>.</p>

In this fragment, both `property` attributes contain a *term*.  The
`title` *term* is converted to the IRI of FHISO's `title` *citation
element*:

    http://terms.fhiso.org/sources/title

In considering the `authorName` *term*, a parser looks for a `vocab`
attribute on the `<span>` or the enclosing `<p>` element.  No such
attribute exists, and the RDFa attributes are being used in HTML which
provides no *default vocabulary*.

The parser *may* consider the standard *initial context* too, and if it
is a full RDFa parser it *must*.   As the RDFa attributes are being used
in HTML, this is defined in [HTML5+RDFa Context].  At the present time
this only includes mappings for `describedBy`, `license` and `role`.
These may be matched case-sensitively or failing that
case-insensitively, but the `title` *term* used in this example clearly
does not match.

Regardless of whether the application considered the *initial context*,
the `title` *term* cannot be resolved to an IRI and is therefore
ignored.
{/}

{.ednote} If use of the *initial context* is changed to be *required*
for CURIEs, below, it should be changed here too.

### Compact URI Expressions (CURIEs)

A **CURIE** comprises two components, a *prefix* and a *reference*,
separated by a colon (U+003A).  It matches the `curie` production given
in §6 of [RDFa Core].

{.note ...}  This production is defined as follows:

    curie       ::=   ( prefix? ':' )? reference
    prefix      ::=   NCName
    reference   ::=   ( ipath-absolute | ipath-rootless | ipath-empty ) 
                           ( '?' iquery )?  ( '#' ifragment )?

The definitions of `NCName` is found in [XML Names].  The various
productions referenced the definition of `reference` are defined in
&#x5B;[RFC 3987](http://tools.ietf.org/html/rfc3987)].  None of these
`ipath` productions match a string beginning "`//`", therefore IRIs of
the form `http://`... never match the `curie` syntax production.  There
is a conflict with certain other, less-used IRI schemes, and
`mailto:user@example.com` does match the syntax.  However this only
results in this IRI being treated as a CURIE if `mailto` is defined as a
CURIE prefix.  The RDFa working group considered the risk of this to be
minimal.

Although this syntax definition allows the omission of both `prefix`
and the colon, in practice there is no situation in RDFa where both can
be omitted and the result still parsed as a CURIE.  A parser
conforming to this standard *may* safely treat the colon as mandatory.
{/}

When a `property` or `typeof` attribute contains something that is
syntactically a CURIE, the parser should look up its *prefix* to see
whether a *prefix mapping* (which is an IRI) has been defined.  This
look-up occurs case-insensitively.

If the *prefix* has been omitted and the CURIE begins with a colon,
parsers *may* ignore the CURIE and *must not* fall back to treating it
as an IRI; if is is not ignored, the *prefix mapping* *must* be

    http://www.w3.org/1999/xhtml/vocab#

{.note}  This vocabulary contains little of use in marking up *formatted
citations*.

When the *prefix* is present, a parser *must* try to look it up in the
*local prefix mappings*.  These are set using `prefix` attributes.  This
attribute *must* contain an even number of whitespace separated tokens:
the first and every subsequent odd token must be an `NCName` followed by
a colon; the second and every subsequent even token must be an IRI.  The
`NCName` is the *prefix* and the IRI is its *prefix mapping*.  The
mapping applies to the element where it is specifide and to all elements
in its content unless overridden.

{.example ...}  The following is an example of a well-formed `prefix`
attribute.

    <div prefix="cev: http://terms.fhiso.org/sources/
                 dc:  http://purl.org/dc/elements/1.1/">
      <i prefix="dc:  http://purl.org/dc/terms/"
         property="cev:title dc:title">Les ancêtres de Charlemagne</i>
    </div>

The `prefix` attribute on the `<div>` defines two *local prefix
mappings*, one for the `cev` *prefix*, the other for the `dc` *prefix*.
The `dc` *local prefix mapping* is overridden by the `prefix` atribute on the
`<i>` element; the `cev` *local prefix mapping* has not been overriden
and remains in operation.
{/}

The *prefix* consisting of a single underscore character (U+005F) has
special meaning in §7.4.5 [RDFa Core] for referencing *blank nodes*.  It
*must not* be used in CURIEs other than for that purpose.  Support for
*blank nodes* is *optional* in this standard.  Applications that do not
support *blank nodes* *must* ignore CURIEs with a *prefix* consisting of
a single underscore.

In determining the *local prefix mapppings*, a parser *may* also use 
XML namespace declarations as defined in §7.5, item 3 of [RDFa Core].
This is not required even in full RDFa parsers and is deprecated; it is
*not recommended* by this standard.  

If the *prefix* was not found in the *local prefix mappings*, a parser
*may* use an *initial context* as described in §9 of [RDFa Core] to
determine the *prefix mapping*.  When an *initial context* is
used, it *must* be the standard one for the language on which the RDFa
tags are used: implementations *must not* define their own *initial
context*.

{.ednote} It may be worth making this *required* rather than *optional*
as the *initial context* for HTML contains *prefix mappings* for several
potentially useful vocabularies including Dublin Core and PROV.  It is
unlikely to add much complexity to the parser or this specification.

If a *prefix mapping* is found, the CURIE is converted to an IRI by
prepending the *prefix mapping* to the *reference* part of the CURIE.

{.example ...} The two CURIEs in the previous example expand to these
IRIs:

    http://terms.fhiso.org/sources/title
    http://purl.org/dc/terms/title
{/}

If no *prefix mapping* is found, the CURIE *shall* be treated as an IRI
if it is syntactically valid as one or ignored otherwise.  If this
results in an IRI with an unknown scheme, the parser *may* ignore it;
parsers *must not* ignore the `http`, `https` or `urn` schemes.

{.note} Virtually all CURIEs are syntactically valid
IRIs since `prefix:reference` is a valid IRI, despite having an unknown
scheme.  The option of ignoring unknown IRI with unknown schemes is
introduced because this standard makes the use of an *initial context*
*optional*.  CURIEs with prefixes that would be resolved via the *initial
context* in a full RDFa parser may therefore be left unresolved by a
parser conforming to this standard.  Almost invariably they will have an
unknown scheme when reinterpreted as an IRI and can therefore be
dropped.  Full RDFa parsers *must* use *initial contexts* and therefore
*must not* ignore IRIs with unknown schemes.

{.ednote} If support for *initial contexts* becomes *required*, the
ability to ignore unknown schemes should probably be dropped.

## Locating formatted citations

In general an HTML document will contain more than just a single
*formatted citation*.  Other parts of the HTML may also contain RDFa
attributes for entirely different reasons, and even if the only use of
RDFa is for tagging *citation elements* it is important not to mix the
*citation elements* from one *formatted citation* with those of another.

HTML content is only considered to be part of a *formatted citation* if
it is a *source-type element* or is contained within one.  A
**source-type element** is any element that has a `typeof` attribute
whose value once shorthand IRIs have been expanded includes the IRI:

    http://terms.fhiso.org/sources/Source

{.example ...}  The following example contains two entirely unrelated
uses of RDFa attributes:

    <p vocab="http://terms.fhiso.org/sources/" typeof="Source">
      <span property="authorName">Settipani</span>, <i>Ibid.</i></p>
    <div vocab="http://creativecommons.org/ns#">Released under a 
      <a href="http://creativecommons.org/licenses/by/3.0/"
         property="license">Creative Commons License</a>.</div>

The `typeof` attribute of the `<p>` element has a value that expands to
the required IRI.  This marks the `<p>` element as a *source-type
element*, and its contents as a *formatted citation*.  This contains
just one `property` attribute, so a parser will find just one *citation
element*: an `authorName` one with value "Settipani".

The `license` property is not contained in a *source-type element* and
therefore does not denote a *citation element*.  It is a use of RDFa
that is outside the scope of this standard.  This is as well:
Settipani's book is not licensed under a Creative Commons License,
though a page discussing it may well be.
{/}

An external mechanism may be used to designate the entirety of an HTML
document or fragment a *source-type element*.

{.example} A non-HTML syntax might embed fragments of HTML to represent
individual *formatted citations*.  It would likely designate each
fragment to be a *source-type element*, in which case no `typeof`
attribute is required.

## Locating citation elements

*Citation elements* are tagged by using `property` attributes.  However
a `property` attribute *shall* only be interpretted as representing a
*citation element* if:

*   it is on an element contained inside a *source-type element* (but
    is not directly on the *source-type element* itself); and 

*   it is not located on a *source-exclusion element* within the
    *source-type element*, nor is it on an element contained within a
    *source-exclusion element*.

{.note} The concept of a *source-exclusion element* is necessary to
prevent a parser from misinterpretting `property` attributes that are
part of more complex RDFa constructs which this standard does not
require to be supported.  Future FHISO standards may make use of some of
these RDFa constructs and this restriction also allows for forwards
compatibility.

An application that supports only those features of RDFa *required* by
this standard *must* consider an element to be a **source-exclusion
element** if:

*  it is contained within a *source-type element* (but not the
   *source-type element* itself) and has an attribute named `about`,
   `inlist`, `rev`, `resource`, `rev`, or `typeof`; or

*  it is the *source-type element* itself and has an attribute named
   `property`.  In this case no *citation elements* will be found in the
   *source-type element*.

{.ednote}  The circumstances in which the *source-type element* is
itself excluded needs further consideration giving particular attention
to the processing sequence in §7.5 of [RDFa Core].

{.example ...}  The following example includes a more complex use of
RDFa attributes, beyond what this standard requires to be understood.

    <p prefix="foaf: http://xmlns.com/foaf/0.1/"
       vocab="http://terms.fhiso.org/sources/" typeof="Source">
      <span rel="foaf:maker">
        <span property="foaf:name">Settipani</span></span>,
      <i property="title">Les ancêtres de Charlemagne</i>.
    </p>

The `<p>` element is a *source-type element* due to the
`typeof="Source"` attribute, and the *formatted citation* is the string
"Settipani, *Les ancêtres de Charlemagne*."  

The `<p>` element contains one *source-exclusion element*: the outer
`<span>` element due to its `rel` attribute.  Parsers are not expected
to understand the meaning of the `rel` attribute, just to note its
presence.  As the inner `<span>` element is contained within this 
*source-exclusion element*, the `property="foaf:name"` attribute *must
not* be treated as tagging a *citation element*.  

The `property` attribute on the `<i>` element is not located within a
*source-exclusion element*, and therefore it does denote a *citation
element*.  This is the only *citation element* in this example.
{/}

{.ednote ...} These rules allow *source-type elements* to nest.  

    <p vocab="http://terms.fhiso.org/sources/" typeof="Source">
      <span property="authorName">Settipani</span>; citing  
      <span rel="cites" typeof="Source"><i property="title">Vita 
        Sancti Arnulfi</i></span>.</p>

The `<p>` and second `<span>` elements are both *source-type elements*.
The former contains the *formatted citation* "Settipani; citing *Vita
Sancti Arnulfi*", while the latter contains the *formatted citation*
"*Vita Sancti Arnulfi*".  The second `<span>` element is also
*source-exclusion element* of the `<p>` *source-type element*.  This
means each *source-type element* has one *citation element*. 

This behaviour is intentional, and is how layered citations are expected
to be implemented.  The details have yet to be finalised.
{/}

Applications which support a larger part of RDFa *may* treat fewer
elements as *source-exclusion elements*.  If so, they *must* ensure
that RDFa constructs are only treated as *citation elements* when they
produce an RDF triples whose subject has the following RDF type:
 
    http://terms.fhiso.org/sources/Source

{.note}  This standard is designed to allow implementors to parse those
RDFa constructs used without having to consider how they map to RDF.
The preceding paragraph is only of relevant if an implementor wishes to
make greater use of the associated RDF features.

## Generating citation elements

As defined in the Citation Elements standard, a *citation element*
consists of four components:

*  an *optional* *layer identifer*;
*  a *required* *citation element name*;
*  a *required* *citation element value*; and
*  an *optional* *language tag*.
 
Once a parser has identified the `property` attribute tagging *citation
element* it *shall* determine each component of the *citation element*
as described in the following sub-sections.

For the purpose of this section, the **current element** refers to the
element that has the `property` attribute which tags the current
*citation element*.  

### The layer identifier

{.ednote} This draft does not yet address how the *layer identifier* is
set.  Possibly with named blank nodes?

### The citation element name

The *citation element name* *shall* be the value of the `property`
attribute, once shorthand IRIs have been expanded.  If the `property`
attribute contains more than one IRI, each *shall* be used as the
*citation element name* of a separate *citation element* with the same
*layer identifier*, *citation element value* and *language tag*.

### The citation element value

The *citation element value* is determined based on the RDFa attributes
present on the *current element* as follows.

If *current element* has a `content` attribute, then the *citation
element value* *shall* be the value of the `content` attribute.

{.example ...}  The purpose of the `content` attribute is to allow the
*citation element value* to be something that is not rendered or
otherwise used in HTML.  This is particularly important when the
*citation element* is required to have a value in a format that is
different to how the element is formatted.

    <span property="http://terms.fhiso.org/sources/publicationDate"
          content="2017-05-22">May 22nd, 2017</span>

In this case, the use of a `content` attribute is necessary because the
`publicationDate` *citation element value* *must* be a date in the
prescribed date format based on [ISO 8601]: it *must not* be a date like
"May 22nd, 2017".
{/}

{.ednote ...} To be strictly compatible with RDFa, the `content` attribute
would only be considered if there was either no `datatype` attribute or
there was a `datatype` attribute and it had a value (after expanding
shorthand IRIs) other than 

    http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral
{/}

{.ednote} It would be desirable to add support for the `resource`
attribute here.  Before adding it, it is necessary to establish how safe
it is to remove `resource` from the list of attributes that make a
*source-exclusion element*.

Otherwise, if *current element* has an `href` attribute and no
`datatype` attribute, the *citation element value* *shall* be the value
of the `href` attribute, which shall be an IRI.  
 
Otherwise, if *current element* has a `src` attribute and no `datatype`
attribute, the *citation element value* *shall* be the value of the
`src` attribute, which shall be an IRI.

{.note} The requirement that there be no `datatype` attribute exists to
ensure compatibility with a full RDFa parser.  This standard does not
require the `datatype` attribute to be parsed or understood.

{.note} The [HTML+RDFa] standard does not change which HTML elements can
have an `href` or `src` attribute.  Most `href` attributes in HTML are
found on `<a>` elements; most `src` attributes are on elements that
display some form of media, particularly `<img>` and in HTML5,
`<video>` and `<audio>`.

{.example ...}  When an `href` or `src` attribute links to an online
*source*, it can be tagged as a *citation element*.

    <div vocab="http://terms.fhiso.org/sources/" typeof="Source">
      <a href="http://discovery.nationalarchives.gov.uk/"
         property="accessURL"><span property="title">Discovery</span></a>
      (online catalogue)
    </div>

This example has two *citation elements*:

--------------           --------------------------------------
`accessURL`:             `http://discovery.nationalarchives.gov.uk/`
`title`:                 "`Discovery`"
--------------           --------------------------------------

The fact that the second `property` attribute is on a child element of
the element containing the first `property` attribute is irrelevant and
does not signify any additional connection between the `title` and the
`accessURL` over and above their usual relationship.
{/}

Otherwise, the *citation element value* *shall* be formed by
concatenating the text contained in each of the descendant elements
of the *current element* in document order.

{.example ...} This definition allows citation elements to nest which
can be useful when tagging full titles and short versions of them.

    <i property="title"><span property="shortTitle">The visitations 
      of Kent</span>, taken in the years 1530–1 by Thomas Benolte, 
      Clarenceux, and 1574 by Robert Cooke, Clarenceux.</i>

The `shortTitle` property takes the value "The visitations of Kent",
while the `title` property takes the value "The visitations of Kent,
taken in the years ..." by concatenating the text in the nested
`<span>` element with the text directly in the `<i>` element.
{/}

{.note}  The *citation element value*, as defined in this section, is
the same as the *current property value* given in step 11 of the
processing sequence given in §7.5 of [RDFa Core].

### The language tag

The *language tag* of the *citation element* *shall* be the value of
`xml:lang` or `lang` attribute on the *current element*, failing which
on the nearest ancestor element of the *current element*.  If both
attributes are present on the same element, the `xml:lang` attribute
takes precedence.

{.note}  This standard does not change when the `xml:lang` and `lang`
attributes may be used on an HTML element.  In particular, the
`xml:lang` attribute is only allowed in XHTML documents.


{.example ...}
    <p vocab="http://terms.fhiso.org/sources/" typeof="source" lang="en">
      <span property="authorName"
            content="Settipani, Christian">Christian Settipani</span>, 
      <i property="title" lang="fr">Les ancêtres de Charlemagne</i>, 
      <span property="edition" content="2">2nd ed.</span> 
    </p>

This *formatted citation* is correctly tagged with the *language tag* `en`
denoting English.   This is because, even though the book's title is
French, the citation as a whole is in English.  Had the citation been
writen in French, the edition would have been written "2ᵉ éd" rather
than "2nd ed".

This example contains three *citation elements*.  The `authorName` and
`edition` *citation elements* both inherit the `en` *language tag*.  In
the case of `authorName` this may or may not be what was intended: the
author is French but his name would not normally be altered in
translation to English.  The explicit *language tag* is necessary on the
`title` *citation element*, as the title is clearly French.
{/}

If no applicable `xml:lang` or `lang`, an external mechanism may be used
to supply the *language tag*.

{.example}  In a document fetched via HTTP, a `Content-Language`
header may provide the default *language tag* for the whole document.

{.example}  If the *formatted citation* is fragment of XHTML in a
different XML language, and value of `xml:lang` attributes in the
host XML will be inherited by the XHTML as defined in §2.12 of [XML].

When these attributes are used in languages other than HTML, the
definition of that language *may* provide a default *language tag* that
applies in the event that no such attribute is found.  

{.note} FHISO does *not recommend* the use of a default *language tag* when it 
gives privileged status to one language.  If technical considerations
require a default *language tag*, a neutral *language tag* such as `und`
(defined in &#x5B;[ISO 639-2](http://www.loc.gov/standards/iso639-2/)]
to represent an undetermined language) *should* be used.

If no applicable `xml:lang` or `lang` attribute was found, no value was
supplied through an external mechanism and no default applies, or if
provided *language tag* is an empty string, the *citation element* has
no *language tag*.

## References

### Normative references

[RDFa Core]
:   W3C (World Wide Web Consortium). *RDFa Core 1.1*.
    W3C Recommendation, 3rd ed., 2015.
    See <http://www.w3.org/TR/rdfa-core>.

[RFC 2119]
:   IETF (Internet Engineering Task Force).  *RFC 2119:  Key words for
    use in RFCs to Indicate Requirement Levels.*  BCP 14.  Scott Bradner, 1997.
    See <http://tools.ietf.org/html/rfc2119>.

[XML]
:   W3C (World Wide Web Consortium). *Extensible Markup Language (XML)
    1.0 (Fifth Edition)*.  W3C Recommendation, 26 Nov 2008.
    See <https://www.w3.org/TR/REC-xml/>.

### Other references

[Dublin Core]
:   Dublin Core Metadata Initiative. *Dublin Core metadata element set*.
    Dublin Core recommendation, version 1.1, 1999. 
    See <http://dublincore.org/documents/dcmi-terms/>.

[HTML5+RDFa Context]
:   W3C (World Wide Web Consortium). *HTML5+RDFa Initial Context*.
    Last updated 9 Dec 2011.
    See <http://www.w3.org/2011/rdfa-context/html-rdfa-1.1>.

[ISO 639-2]
:   ISO (International Organization for Standardization).  *ISO
    639-2:1998.  Codes for the representation of names of languages
    &mdash; Part 2: Alpha-3 code*.  1998.  (See
    <http://www.loc.gov/standards/iso639-2/>.)

[ISO 8601]
:   ISO (Internation Organization for Standardization).  *ISO
    8601:2004.  Data elements and interchange formats — Information
    interchange — Representation of dates and times*.  2004.


[RDFa Primer]
:   W3C (World Wide Web Consortium). *RDFa 1.1 Primer*.
    W3C Recommendation, 3rd ed., 2015.
    See <http://www.w3.org/TR/rdfa-primer>.

[HMTL+RDFa]
:   W3C (World Wide Web Consortium). *HTML+RDFa 1.1*.
    W3C Recommendation, 2nd ed., 2015.
    See <http://www.w3.org/TR/html-rdfa>.

[XHMTL+RDFa]
:   W3C (World Wide Web Consortium). *XHTML+RDFa 1.1*.
    W3C Recommendation, 3rd ed., 2015.
    See <http://www.w3.org/TR/xhtml-rdfa>.

[XML Names]
:   W3 (World Wide Web Consortium).  *Namespaces in XML 1.0 (Third
    Edition)*.  W3C Recommendation, 8 Dec 2009.
    See <https://www.w3.org/TR/REC-xml-names/>.


